id: "wisun_stack"
label: "Wi-SUN Stack Common"
description: "Wi-SUN stack"
package: "wisun"
category: "Wi-SUN"
quality: "production"
root_path: "protocol/wisun/wisun"

requires:
  - name: "mbedtls_core"
  - name: "mbedtls_ecc_secp256r1"
  - name: "mbedtls_ecdh"
  - name: "mbedtls_ecdsa"
  - name: "mbedtls_nist_kw"
  - name: "mbedtls_sha"
  - name: "mbedtls_tls"
  - name: "rail_lib_singleprotocol"
  - name: "rail_util_pa"
  - name: "rail_util_pti"
  - name: "cmsis_rtos2_port"
  - name: "nvm3"
  - name: "slist"
  - name: "wisun_implementation"

recommends:
  - id: "wisun_common_library"

provides:
  - name: "wisun_stack"

define:
  - name: "MBED_CONF_NANOSTACK_CONFIGURATION"
    value: "ws_router"
  - name: "MBED_TRACE_MAX_LEVEL"
    value: "TRACE_ACTIVE_LEVEL_ALL"
  - name: "MBED_CONF_MBED_TRACE_ENABLE"
    value: "1"
  - name: "STANDARD_MALLOC"
    value: "1"
  - name: "NS_USE_EXTERNAL_MBED_TLS"
    value: "1"

template_contribution:
  - name: "event_handler"
    value:
      event: "stack_init"
      include: "sl_wisun_stack.h"
      handler: "sl_wisun_stack_init"
  - name: "mbedtls_config"
    value: "MBEDTLS_X509_CHECK_EXTENDED_KEY_USAGE"
  - name: "mbedtls_config"
    value: "MBEDTLS_SSL_EXPORT_KEYS"
  - name: "mbedtls_config"
    value: "MBEDTLS_KEY_EXCHANGE_ECDHE_ECDSA_ENABLED"

source:
  - path: "src/sl_wisun_api.c"
  - path: "src/sl_wisun_stack.c"
  - path: "src/sli_wisun_task.c"
  - path: "src/sli_wisun_driver.c"
  - path: "src/sli_wisun_timer.c"
  - path: "src/sli_wisun_nvm.c"
  - path: "src/nanostack-hal/ns_event_loop.c"
  - path: "src/nanostack-hal/ns_event_loop_mutex.c"
  - path: "src/nanostack-hal/ns_hal_init.c"
  - path: "src/nanostack-hal/arm_hal_interrupt.c"
  - path: "src/nanostack-hal/arm_hal_timer.c"
  - path: "src/nanostack-hal/arm_hal_fhss_timer.c"
  - path: "src/nanostack-hal/arm_hal_random.c"
  - path: "src/nanostack-hal/arm_hal_interrupt_private.h"

  # Header files
  - path: "inc/sl_wisun_api.h"
  - path: "inc/sli_wisun_nvm.h"
  - path: "inc/sl_wisun_msg_api.h"
  - path: "inc/sli_wisun_task.h"
  - path: "inc/sl_wisun_stack.h"
  - path: "inc/sli_wisun_timer.h"
  - path: "inc/rail_config.h"
  - path: "inc/sl_wisun_types.h"
  - path: "inc/sli_wisun_trace.h"
  - path: "inc/sli_wisun_driver.h"
  - path: "inc/wisun_custom_certificates.h"
  - path: "inc/sl_wisun_version.h"
  - path: "inc/sl_wisun_common.h"

  - path: "nanostack/frameworks/mbed-trace/mbed-trace/mbed_trace.h"
  - path: "nanostack/nanostack/sal-stack-nanostack-eventloop/nanostack-event-loop/eventOS_event.h"
  - path: "nanostack/nanostack/sal-stack-nanostack-eventloop/nanostack-event-loop/eventOS_event_timer.h"
  - path: "nanostack/nanostack/sal-stack-nanostack-eventloop/nanostack-event-loop/eventOS_scheduler.h"
  - path: "nanostack/frameworks/nanostack-libservice/mbed-client-libservice/ip6string.h"
  - path: "nanostack/frameworks/nanostack-libservice/mbed-client-libservice/ns_list.h"
  - path: "nanostack/frameworks/nanostack-libservice/mbed-client-libservice/nsdynmemLIB.h"
  - path: "nanostack/frameworks/nanostack-libservice/mbed-client-libservice/nsdynmem_tracker.h"
  - path: "nanostack/frameworks/nanostack-libservice/mbed-client-libservice/common_functions.h"
  - path: "nanostack/frameworks/nanostack-libservice/mbed-client-libservice/ns_types.h"
  - path: "nanostack/frameworks/nanostack-libservice/mbed-client-libservice/platform/arm_hal_interrupt.h"
  - path: "nanostack/nanostack/sal-stack-nanostack-eventloop/nanostack-event-loop/platform/arm_hal_timer.h"
  - path: "nanostack/nanostack/nanostack-hal-mbed-cmsis-rtos/ns_hal_init.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/nanostack/fhss_config.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/nanostack/platform/arm_hal_phy.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/nanostack/mac_api.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/nanostack/sw_mac.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/nanostack/ws_management_api.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/nanostack/socket_api.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/nanostack/net_rpl.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/nanostack/mlme.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/nanostack/mac_mcps.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/nanostack/mac_common_defines.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/nanostack/net_interface.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/nanostack/fhss_ws_extension.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/nanostack/fhss_api.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/nanostack/ns_address.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/nanostack/net_polling_api.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/nanostack/nwk_stats_api.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/nanostack/net_fhss.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/nanostack/net_nwk_scan.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/nanostack/multicast_api.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/source/Security/protocols/sec_prot_certs.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/source/Security/protocols/sec_prot_keys.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/source/nsconfig.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/source/configs/cfg_ws_router.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/source/configs/base/cfg_ws_router.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/source/RPL/rpl_control.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/source/NWK_INTERFACE/Include/protocol.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/source/NWK_INTERFACE/Include/protocol_abstract.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/source/Service_Libs/Neighbor_cache/neighbor_table_definition.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/source/Service_Libs/Trickle/trickle.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/source/Service_Libs/pan_blacklist/pan_blacklist_api.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/source/Service_Libs/mac_neighbor_table/mac_neighbor_table.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/source/ipv6_stack/ipv6_routing_table.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/source/Core/include/ns_socket.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/source/Core/include/ns_error_types.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/source/Core/include/sockbuf.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/source/Core/include/ns_address_internal.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/source/Core/include/ns_buffer.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/source/6LoWPAN/IPHC_Decode/lowpan_context.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/source/6LoWPAN/MAC/mac_helper.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/source/6LoWPAN/ws/ws_common.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/source/6LoWPAN/ws/ws_config.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/source/6LoWPAN/ws/ws_common_defines.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/source/6LoWPAN/ws/ws_neighbor_class.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/source/6LoWPAN/ws/ws_pae_nvm_store.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/source/6LoWPAN/ws/ws_pae_nvm_data.h"
  - path: "nanostack/frameworks/mbed-client-randlib/mbed-client-randlib/platform/arm_hal_random.h"
  - path: "nanostack/frameworks/mbed-client-randlib/mbed-client-randlib/randLIB.h"
  - path: "nanostack/frameworks/nanostack-libservice/mbed-client-libservice/ns_trace.h"
  - path: "nanostack/nanostack/sal-stack-nanostack-eventloop/nanostack-event-loop/platform/eventloop_config.h"
  - path: "nanostack/nanostack/nanostack-hal-mbed-cmsis-rtos/ns_event_loop.h"
  - path: "nanostack/nanostack/nanostack-hal-mbed-cmsis-rtos/ns_event_loop_mutex.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/nanostack/mac_filter_api.h"
  - path: "nanostack/nanostack/sal-stack-nanostack/source/Common_Protocols/ipv6_constants.h"
include:
  - path: "inc/"
  - path: "nanostack/nanostack/sal-stack-nanostack/nanostack/"
  - path: "nanostack/nanostack/sal-stack-nanostack/nanostack/platform/"
  - path: "nanostack/nanostack/sal-stack-nanostack-eventloop/nanostack-event-loop/"
  - path: "nanostack/nanostack/sal-stack-nanostack-eventloop/nanostack-event-loop/platform/"
  - path: "nanostack/frameworks/mbed-client-randlib/mbed-client-randlib/"
  - path: "nanostack/frameworks/mbed-client-randlib/mbed-client-randlib/platform/"
  - path: "nanostack/nanostack/sal-stack-nanostack/source/configs/"
  - path: "nanostack/nanostack/sal-stack-nanostack/source/configs/base/"
  - path: "nanostack/nanostack/sal-stack-nanostack/source/"
  - path: "nanostack/frameworks/nanostack-libservice/"
  - path: "nanostack/frameworks/nanostack-libservice/mbed-client-libservice/"
  - path: "nanostack/frameworks/nanostack-libservice/mbed-client-libservice/platform/"
  - path: "nanostack/frameworks/mbed-trace/"
  - path: "nanostack/nanostack/nanostack-hal-mbed-cmsis-rtos/"

config_file:
  - path: "component_config/pti-config.h"
